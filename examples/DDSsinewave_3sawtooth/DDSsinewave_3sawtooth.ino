#include <AD9106.h>

#define NUMREGS 66

// Initialize AD9106 instance
AD9106 device(10);

uint16_t AD9106_example6_regval[NUMREGS] = {
    0x0000, 0x0e00, 0x0000, 0x0000, 0x4000, 0x4000, 0x4000, 0x4000, 0x0000,
    0x1f00, 0x1f00, 0x1f00, 0x1f00, 0x0000, 0x0000, 0x0000, 0x000e, 0x0000,
    0x0000, 0x0000, 0x0000, 0x1212, 0x1232, 0x0111, 0xffff, 0x0101, 0x0101,
    0x0003, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4000, 0x4000, 0x4000,
    0x4000, 0x0001, 0x7e00, 0x0750, 0x7500, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0002, 0x0000, 0x0000, 0x2710, 0x0000, 0x0000, 0x0001, 0x0000, 0x0000,
    0x0000, 0x0001, 0x1770, 0x0000, 0x0000, 0x0001, 0x0fa0, 0x0000, 0x0000,
    0x7fff, 0x0001, 0x0001};

void setup() {
  Serial.begin(9600);
  while (!Serial) {
    ;
  }
  Serial.println("*** Serial Port Ready ***");

  //  Initialize device
  device.begin();

  // Start SPI communication at 100MHz
  device.spi_init(1000000);

  //  Reset registers
  device.reg_reset();

  Serial.println("*** Writing AD9106 Example 6 to Registers ***");
  for (int i = 0; i < NUMREGS; i++) {
    device.spi_write(device.reg_add[i], AD9106_example6_regval[i]);
  }
  delay(1);
  device.start_pattern();
}

void loop() {}